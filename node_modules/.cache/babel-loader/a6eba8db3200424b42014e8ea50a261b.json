{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar React = require(\"react\");\n\nvar ReactDOM = require(\"react-dom\");\n\nvar RLDDItemComponent = function (_super) {\n  __extends(RLDDItemComponent, _super);\n\n  function RLDDItemComponent(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.state = {\n      isDragging: false\n    };\n    _this.isDown = false;\n    _this.mouseDownTimestamp = 0;\n    _this.initialOffset = {\n      x: 0,\n      y: 0\n    };\n    _this.handleMouseDown = _this.handleMouseDown.bind(_this);\n    _this.handleMouseMove = _this.handleMouseMove.bind(_this);\n    _this.handleMouseUp = _this.handleMouseUp.bind(_this);\n    return _this;\n  }\n\n  RLDDItemComponent.prototype.componentDidMount = function () {\n    this.props.logic.setItemIdBoxRect(this.props.itemId, this.getBox());\n  };\n\n  RLDDItemComponent.prototype.componentDidUpdate = function (prevProps, prevState) {\n    if (!this.state.isDragging && prevState.isDragging) {\n      this.removeDocumentListeners();\n    }\n\n    this.props.logic.setItemIdBoxRect(this.props.itemId, this.getBox());\n  };\n\n  RLDDItemComponent.prototype.componentWillUnmount = function () {\n    this.removeDocumentListeners();\n  };\n\n  RLDDItemComponent.prototype.render = function () {\n    var dragged = this.props.dragged ? 'dragged' : '';\n    var hovered = this.props.hovered ? 'hovered' : '';\n    var activity = this.props.activity ? 'activity' : '';\n    var cssClasses = 'dl-item ' + activity + ' ' + dragged + ' ' + hovered;\n    return React.createElement(\"div\", {\n      onMouseDown: this.handleMouseDown,\n      className: cssClasses\n    }, this.props.children);\n  };\n\n  RLDDItemComponent.prototype.addDocumentListeners = function () {\n    document.addEventListener('mouseup', this.handleMouseUp);\n    document.addEventListener('mousemove', this.handleMouseMove);\n  };\n\n  RLDDItemComponent.prototype.removeDocumentListeners = function () {\n    document.removeEventListener('mouseup', this.handleMouseUp);\n    document.removeEventListener('mousemove', this.handleMouseMove);\n  };\n\n  RLDDItemComponent.prototype.handleMouseDown = function (e) {\n    this.isDown = true;\n    this.mouseDownTimestamp = new Date().getTime();\n    this.initialOffset = this.getOffset(e);\n    e.preventDefault();\n    this.addDocumentListeners();\n  };\n\n  RLDDItemComponent.prototype.handleMouseMove = function (e) {\n    if (this.isDown === false || this.getTimeSinceMouseDown() < this.props.logic.getDragDelay()) {\n      return;\n    }\n\n    var offset = {\n      x: e.layerX - this.initialOffset.x,\n      y: e.layerY - this.initialOffset.y\n    };\n\n    if (this.state.isDragging === false && this.isDown) {\n      this.props.logic.handleDragBegin(this.props.itemId);\n    }\n\n    this.setState(Object.assign(this.state, {\n      isDragging: this.isDown\n    }));\n    this.props.logic.handleDragMove(this.props.itemId, offset);\n  };\n\n  RLDDItemComponent.prototype.getTimeSinceMouseDown = function () {\n    return new Date().getTime() - this.mouseDownTimestamp;\n  };\n\n  RLDDItemComponent.prototype.handleMouseUp = function () {\n    this.isDown = false;\n\n    if (this.state.isDragging) {\n      this.setState(Object.assign(this.state, {\n        isDragging: this.isDown\n      }));\n      this.props.logic.handleDragEnd();\n    }\n  };\n\n  RLDDItemComponent.prototype.getBox = function () {\n    var ref = ReactDOM.findDOMNode(this);\n    return ref ? ref.getBoundingClientRect() : {\n      top: 0,\n      left: 0,\n      width: 0,\n      height: 0\n    };\n  };\n\n  RLDDItemComponent.prototype.getOffset = function (e) {\n    var box = this.getBox();\n    var docElement = document.documentElement;\n    return {\n      x: e.pageX - (box.left + docElement.scrollLeft - docElement.clientLeft),\n      y: e.pageY - (box.top + docElement.scrollTop - docElement.clientTop)\n    };\n  };\n\n  return RLDDItemComponent;\n}(React.Component);\n\nexports.default = RLDDItemComponent;","map":{"version":3,"sources":["../src/RLDDItemComponent.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = require(\"react\");\nvar ReactDOM = require(\"react-dom\");\nvar RLDDItemComponent = (function (_super) {\n    __extends(RLDDItemComponent, _super);\n    function RLDDItemComponent(props) {\n        var _this = _super.call(this, props) || this;\n        _this.state = { isDragging: false };\n        _this.isDown = false;\n        _this.mouseDownTimestamp = 0;\n        _this.initialOffset = { x: 0, y: 0 };\n        _this.handleMouseDown = _this.handleMouseDown.bind(_this);\n        _this.handleMouseMove = _this.handleMouseMove.bind(_this);\n        _this.handleMouseUp = _this.handleMouseUp.bind(_this);\n        return _this;\n    }\n    RLDDItemComponent.prototype.componentDidMount = function () {\n        this.props.logic.setItemIdBoxRect(this.props.itemId, this.getBox());\n    };\n    RLDDItemComponent.prototype.componentDidUpdate = function (prevProps, prevState) {\n        if (!this.state.isDragging && prevState.isDragging) {\n            this.removeDocumentListeners();\n        }\n        this.props.logic.setItemIdBoxRect(this.props.itemId, this.getBox());\n    };\n    RLDDItemComponent.prototype.componentWillUnmount = function () {\n        this.removeDocumentListeners();\n    };\n    RLDDItemComponent.prototype.render = function () {\n        var dragged = this.props.dragged ? 'dragged' : '';\n        var hovered = this.props.hovered ? 'hovered' : '';\n        var activity = this.props.activity ? 'activity' : '';\n        var cssClasses = 'dl-item ' + activity + ' ' + dragged + ' ' + hovered;\n        return (React.createElement(\"div\", { onMouseDown: this.handleMouseDown, className: cssClasses }, this.props.children));\n    };\n    RLDDItemComponent.prototype.addDocumentListeners = function () {\n        document.addEventListener('mouseup', this.handleMouseUp);\n        document.addEventListener('mousemove', this.handleMouseMove);\n    };\n    RLDDItemComponent.prototype.removeDocumentListeners = function () {\n        document.removeEventListener('mouseup', this.handleMouseUp);\n        document.removeEventListener('mousemove', this.handleMouseMove);\n    };\n    RLDDItemComponent.prototype.handleMouseDown = function (e) {\n        this.isDown = true;\n        this.mouseDownTimestamp = new Date().getTime();\n        this.initialOffset = this.getOffset(e);\n        e.preventDefault();\n        this.addDocumentListeners();\n    };\n    RLDDItemComponent.prototype.handleMouseMove = function (e) {\n        if (this.isDown === false || this.getTimeSinceMouseDown() < this.props.logic.getDragDelay()) {\n            return;\n        }\n        var offset = {\n            x: e.layerX - this.initialOffset.x,\n            y: e.layerY - this.initialOffset.y\n        };\n        if (this.state.isDragging === false && this.isDown) {\n            this.props.logic.handleDragBegin(this.props.itemId);\n        }\n        this.setState(Object.assign(this.state, { isDragging: this.isDown }));\n        this.props.logic.handleDragMove(this.props.itemId, offset);\n    };\n    RLDDItemComponent.prototype.getTimeSinceMouseDown = function () {\n        return new Date().getTime() - this.mouseDownTimestamp;\n    };\n    RLDDItemComponent.prototype.handleMouseUp = function () {\n        this.isDown = false;\n        if (this.state.isDragging) {\n            this.setState(Object.assign(this.state, { isDragging: this.isDown }));\n            this.props.logic.handleDragEnd();\n        }\n    };\n    RLDDItemComponent.prototype.getBox = function () {\n        var ref = ReactDOM.findDOMNode(this);\n        return ref ? ref.getBoundingClientRect() : { top: 0, left: 0, width: 0, height: 0 };\n    };\n    RLDDItemComponent.prototype.getOffset = function (e) {\n        var box = this.getBox();\n        var docElement = document.documentElement;\n        return {\n            x: e.pageX - (box.left + docElement.scrollLeft - docElement.clientLeft),\n            y: e.pageY - (box.top + docElement.scrollTop - docElement.clientTop)\n        };\n    };\n    return RLDDItemComponent;\n}(React.Component));\nexports.default = RLDDItemComponent;\n//# sourceMappingURL=RLDDItemComponent.js.map"]},"metadata":{},"sourceType":"script"}