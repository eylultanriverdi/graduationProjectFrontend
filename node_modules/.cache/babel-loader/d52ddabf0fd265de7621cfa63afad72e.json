{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar React = require(\"react\");\n\nvar RLDDItemComponent_1 = require(\"./RLDDItemComponent\");\n\nvar RLDDLogic_1 = require(\"./RLDDLogic\");\n\nvar RLDDFloatingItemComponent_1 = require(\"./RLDDFloatingItemComponent\");\n\nvar RLDD = function (_super) {\n  __extends(RLDD, _super);\n\n  function RLDD(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.state = {\n      draggedId: -1,\n      hoveredId: -1,\n      draggedItemDimensions: {\n        width: 0,\n        height: 0\n      }\n    };\n\n    _this.createItemComponent = function (item, i) {\n      _this.assertValidItem(item);\n\n      var draggedItemId = _this.state.draggedId;\n      return React.createElement(RLDDItemComponent_1.default, {\n        key: item.id,\n        logic: _this.logic,\n        itemId: item.id,\n        activity: draggedItemId >= 0,\n        dragged: draggedItemId === item.id,\n        hovered: draggedItemId === item.id\n      }, _this.props.itemRenderer(item, i));\n    };\n\n    _this.createFloatingComponent = function () {\n      var draggedItemId = _this.state.draggedId;\n\n      var draggedItemIndex = _this.findItemIndexById(draggedItemId);\n\n      var item = _this.props.items[draggedItemIndex];\n\n      _this.assertValidItem(item);\n\n      return React.createElement(RLDDFloatingItemComponent_1.default, {\n        logic: _this.logic,\n        draggedId: draggedItemId,\n        width: _this.state.draggedItemDimensions.width,\n        height: _this.state.draggedItemDimensions.height\n      }, draggedItemIndex >= 0 && _this.props.itemRenderer(item, draggedItemIndex));\n    };\n\n    _this.handleDragBegin = function (draggedId, width, height) {\n      var draggedItemDimensions = {\n        width: width,\n        height: height\n      };\n\n      _this.setState({\n        draggedId: draggedId,\n        draggedItemDimensions: draggedItemDimensions\n      });\n    };\n\n    _this.handleMouseOver = function (hoveredId) {\n      if (_this.state.draggedId >= 0) {\n        _this.setState({\n          hoveredId: hoveredId\n        }, function () {\n          var newItems = _this.getNewItems();\n\n          if (newItems) {\n            _this.props.onChange(newItems);\n          }\n        });\n      }\n    };\n\n    _this.handleDragEnd = function () {\n      _this.setState({\n        draggedId: -1,\n        hoveredId: -1\n      });\n    };\n\n    _this.assertValidItem = function (item) {\n      if (item) {\n        if (typeof item !== 'object') {\n          throw \"RLDD Error. item must be of type 'object', but it's of type '\" + typeof item + \"'.\";\n        }\n\n        if (typeof item.id !== 'number') {\n          throw \"RLDD Error. item must have an 'id' property of type 'number'. \" + JSON.stringify(item);\n        }\n      }\n    };\n\n    _this.logic = new RLDDLogic_1.default(props.threshold, props.dragDelay);\n    return _this;\n  }\n\n  RLDD.prototype.componentDidMount = function () {\n    this.logic.onDragBeginSignal.addListener(this.handleDragBegin);\n    this.logic.onDragHoverSignal.addListener(this.handleMouseOver);\n    this.logic.onDragEndSignal.addListener(this.handleDragEnd);\n  };\n\n  RLDD.prototype.componentWillUnmount = function () {\n    this.logic.onDragBeginSignal.removeListener(this.handleDragBegin);\n    this.logic.onDragHoverSignal.removeListener(this.handleMouseOver);\n    this.logic.onDragEndSignal.removeListener(this.handleDragEnd);\n  };\n\n  RLDD.prototype.getStateString = function (props, state) {\n    return \"draggedId: \" + state.draggedId + \"\\nhoveredId: \" + state.hoveredId + \"\\nitems: \" + props.items.map(function (item) {\n      return item.id;\n    }).toString();\n  };\n\n  RLDD.prototype.render = function () {\n    var cssClasses = this.props.cssClasses + ' dl-list';\n    var style = this.computeStyle();\n    var items = this.props.items;\n    return React.createElement(\"div\", {\n      className: cssClasses,\n      style: style\n    }, items.map(this.createItemComponent), this.createFloatingComponent());\n  };\n\n  RLDD.prototype.computeStyle = function () {\n    var display = this.props.layout === 'vertical' ? 'block' : 'flex';\n    return Object.assign({\n      display: display\n    }, this.props.inlineStyle || {});\n  };\n\n  RLDD.prototype.getNewItems = function () {\n    var index0 = this.findItemIndexById(this.state.draggedId);\n    var index1 = this.findItemIndexById(this.state.hoveredId);\n\n    if (index0 >= 0 && index1 >= 0 && index0 !== index1) {\n      var newItems = this.logic.arrangeItems(this.props.items, index0, index1);\n      return newItems;\n    }\n\n    return;\n  };\n\n  RLDD.prototype.findItemIndexById = function (id) {\n    var item = this.props.items.find(function (it) {\n      return it.id === id;\n    });\n    return item ? this.props.items.indexOf(item) : -1;\n  };\n\n  RLDD.defaultProps = {\n    cssClasses: '',\n    inlineStyle: {},\n    layout: 'vertical',\n    threshold: 15,\n    dragDelay: 250\n  };\n  return RLDD;\n}(React.Component);\n\nexports.default = RLDD;","map":{"version":3,"sources":["../src/RLDD.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = require(\"react\");\nvar RLDDItemComponent_1 = require(\"./RLDDItemComponent\");\nvar RLDDLogic_1 = require(\"./RLDDLogic\");\nvar RLDDFloatingItemComponent_1 = require(\"./RLDDFloatingItemComponent\");\nvar RLDD = (function (_super) {\n    __extends(RLDD, _super);\n    function RLDD(props) {\n        var _this = _super.call(this, props) || this;\n        _this.state = { draggedId: -1, hoveredId: -1, draggedItemDimensions: { width: 0, height: 0 } };\n        _this.createItemComponent = function (item, i) {\n            _this.assertValidItem(item);\n            var draggedItemId = _this.state.draggedId;\n            return (React.createElement(RLDDItemComponent_1.default, { key: item.id, logic: _this.logic, itemId: item.id, activity: draggedItemId >= 0, dragged: draggedItemId === item.id, hovered: draggedItemId === item.id }, _this.props.itemRenderer(item, i)));\n        };\n        _this.createFloatingComponent = function () {\n            var draggedItemId = _this.state.draggedId;\n            var draggedItemIndex = _this.findItemIndexById(draggedItemId);\n            var item = _this.props.items[draggedItemIndex];\n            _this.assertValidItem(item);\n            return (React.createElement(RLDDFloatingItemComponent_1.default, { logic: _this.logic, draggedId: draggedItemId, width: _this.state.draggedItemDimensions.width, height: _this.state.draggedItemDimensions.height }, draggedItemIndex >= 0 && _this.props.itemRenderer(item, draggedItemIndex)));\n        };\n        _this.handleDragBegin = function (draggedId, width, height) {\n            var draggedItemDimensions = { width: width, height: height };\n            _this.setState({ draggedId: draggedId, draggedItemDimensions: draggedItemDimensions });\n        };\n        _this.handleMouseOver = function (hoveredId) {\n            if (_this.state.draggedId >= 0) {\n                _this.setState({ hoveredId: hoveredId }, function () {\n                    var newItems = _this.getNewItems();\n                    if (newItems) {\n                        _this.props.onChange(newItems);\n                    }\n                });\n            }\n        };\n        _this.handleDragEnd = function () {\n            _this.setState({ draggedId: -1, hoveredId: -1 });\n        };\n        _this.assertValidItem = function (item) {\n            if (item) {\n                if (typeof item !== 'object') {\n                    throw \"RLDD Error. item must be of type 'object', but it's of type '\" + typeof item + \"'.\";\n                }\n                if (typeof item.id !== 'number') {\n                    throw \"RLDD Error. item must have an 'id' property of type 'number'. \" + JSON.stringify(item);\n                }\n            }\n        };\n        _this.logic = new RLDDLogic_1.default(props.threshold, props.dragDelay);\n        return _this;\n    }\n    RLDD.prototype.componentDidMount = function () {\n        this.logic.onDragBeginSignal.addListener(this.handleDragBegin);\n        this.logic.onDragHoverSignal.addListener(this.handleMouseOver);\n        this.logic.onDragEndSignal.addListener(this.handleDragEnd);\n    };\n    RLDD.prototype.componentWillUnmount = function () {\n        this.logic.onDragBeginSignal.removeListener(this.handleDragBegin);\n        this.logic.onDragHoverSignal.removeListener(this.handleMouseOver);\n        this.logic.onDragEndSignal.removeListener(this.handleDragEnd);\n    };\n    RLDD.prototype.getStateString = function (props, state) {\n        return \"draggedId: \" + state.draggedId + \"\\nhoveredId: \" + state.hoveredId + \"\\nitems: \" + props.items.map(function (item) { return item.id; }).toString();\n    };\n    RLDD.prototype.render = function () {\n        var cssClasses = this.props.cssClasses + ' dl-list';\n        var style = this.computeStyle();\n        var items = this.props.items;\n        return (React.createElement(\"div\", { className: cssClasses, style: style },\n            items.map(this.createItemComponent),\n            this.createFloatingComponent()));\n    };\n    RLDD.prototype.computeStyle = function () {\n        var display = this.props.layout === 'vertical' ? 'block' : 'flex';\n        return Object.assign({ display: display }, this.props.inlineStyle || {});\n    };\n    RLDD.prototype.getNewItems = function () {\n        var index0 = this.findItemIndexById(this.state.draggedId);\n        var index1 = this.findItemIndexById(this.state.hoveredId);\n        if (index0 >= 0 && index1 >= 0 && index0 !== index1) {\n            var newItems = this.logic.arrangeItems(this.props.items, index0, index1);\n            return newItems;\n        }\n        return;\n    };\n    RLDD.prototype.findItemIndexById = function (id) {\n        var item = this.props.items.find(function (it) { return it.id === id; });\n        return item ? this.props.items.indexOf(item) : -1;\n    };\n    RLDD.defaultProps = {\n        cssClasses: '',\n        inlineStyle: {},\n        layout: 'vertical',\n        threshold: 15,\n        dragDelay: 250\n    };\n    return RLDD;\n}(React.Component));\nexports.default = RLDD;\n//# sourceMappingURL=RLDD.js.map"]},"metadata":{},"sourceType":"script"}